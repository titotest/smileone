/* === Global Styles === */
/* Define CSS variables for font sizes and transitions */
:root {
    --title-font-size: 5vmin; /* Title font size scales with shortest viewport axis */
    --menu-font-size: 4vmin; /* Menu item font size scales with shortest viewport axis */
    --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8); /* Reduced font size when tapped */
    --transition-duration: 0.5s; /* Duration for menu slide and title positioning animations */
    --safe-area-top: env(safe-area-inset-top, 0); /* Fallback to 0 if not supported */
    --viewport-height: 100vh; /* Fallback for dynamic viewport height */
}

/* Support for dynamic viewport height (dvh) */
@supports (height: 100dvh) {
    :root {
        --viewport-height: 100dvh;
    }
}

/* In portrait mode, scale font sizes with viewport height for better proportionality */
@media (orientation: portrait) {
    :root {
        --title-font-size: 5vmax; /* Scales with viewport height (longer axis) */
        --menu-font-size: 4vmax;
        --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8);
    }
}

/* Reset default margins and ensure full viewport height */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    height: var(--viewport-height); /* Dynamic viewport height to exclude browser UI */
    min-height: var(--viewport-height); /* Ensure compatibility */
    font-family: 'Nunito', Arial, sans-serif; /* Font stack with fallback */
    background: black; /* Black background */
    overflow: hidden; /* Prevent scrolling */
    overscroll-behavior: none; /* Disable pull-to-refresh on mobile */
}

/* === Container === */
/* Center container for title and menu */
.container {
    height: var(--viewport-height); /* Match dynamic viewport height */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
}

/* === Title === */
/* Title styling and positioning */
.title {
    font-size: var(--title-font-size);
    color: #f5f5f7; /* Updated text color */
    font-weight: 900;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(0deg) scale(1); /* Initial transform state */
    white-space: nowrap; /* Prevent text wrapping */
    backface-visibility: hidden; /* Optimize transform animations */
    z-index: 2; /* Ensure title is above menu */
    will-change: top, transform; /* Optimize animation performance */
    transition: top var(--transition-duration) ease, transform var(--transition-duration) ease; /* Smooth top and transform changes */
}

/* Move title to top when menu is visible, account for safe area */
.title.at-top {
    top: calc(var(--title-font-size) + var(--safe-area-top)); /* Add safe area inset */
    transform: translate(-50%, 0); /* Center horizontally, no vertical offset */
    transition: none; /* Disable transitions for static positioning */
}

/* Ensure title stays visible in landscape mode with small viewport height */
@media (orientation: landscape) and (max-height: 400px) {
    .title.at-top {
        top: calc(var(--title-font-size) * 0.5 + var(--safe-area-top)); /* Reduce top spacing */
    }
}

/* === Menu === */
/* Menu container, initially hidden below viewport */
.menu {
    position: absolute;
    top: 100%; /* Start below viewport */
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    visibility: hidden;
    will-change: top, transform, opacity, visibility; /* Optimize animation performance */
    transition: top var(--transition-duration) ease, transform var(--transition-duration) ease, opacity var(--transition-duration) ease, visibility var(--transition-duration) ease; /* Slide and fade animation */
    width: 100%;
    z-index: 1; /* Below title */
}

/* Show menu by sliding up to center */
.menu.visible {
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: 1;
    visibility: visible;
}

/* Menu list styling */
.menu-list {
    display: flex;
    flex-direction: column;
    align-items: center;
    list-style: none;
    padding: 0;
    gap: calc(var(--menu-font-size) * 0.4); /* Gap matches visual text height */
    max-height: calc(var(--viewport-height) - var(--title-font-size) * 2 - var(--safe-area-top)); /* Fit below title */
}

/* Individual menu items */
.menu-item {
    font-size: var(--menu-font-size);
    color: #f5f5f7; /* Updated text color */
    font-weight: 900;
    text-align: center;
    text-decoration: none;
    transition: font-size 0.1s ease, transform 0.1s ease, background-color 0.1s ease; /* Smooth tap effects */
    white-space: nowrap; /* Prevent wrapping */
}

/* Reduce font size and scale down when tapped */
.menu-item.tapped {
    font-size: var(--menu-font-size-tapped);
    transform: scale(0.95); /* Slight scale down for tap feedback */
}

/* === Fornoobies Animation === */
/* "heho" animation at the bottom of the screen */
.fornoobies {
    position: absolute;
    bottom: calc(var(--title-font-size) * 0.5); /* Space from bottom */
    left: 50%;
    transform: translateX(-50%);
    font-size: calc(var(--title-font-size) * 0.5); /* Half of title font size */
    font-family: 'Nunito', Arial, sans-serif;
    font-weight: 900;
    color: rgba(255, 255, 255, 0.5); /* White with 50% opacity */
    display: flex; /* Inline "he" and "ho" */
    white-space: nowrap;
    z-index: 1; /* Below title */
}

.fornoobies.hidden {
    display: none; /* Hidden by default */
}

.he, .ho {
    opacity: 0; /* Start invisible */
    cursor: pointer; /* Indicate clickability */
}

.fornoobies.show .he {
    animation: fadeInHold 0.7s ease forwards; /* Fade in and hold */
}

.fornoobies.show .ho {
    animation: holdFadeOut 0.7s ease forwards;
    animation-delay: 0.7s; /* Start after "he" */
}

@keyframes fadeInHold {
    0% { opacity: 0; }
    42.86% { opacity: 1; } /* Fade in over 0.3s */
    99.99% { opacity: 1; } /* Hold until 0.7s */
    100% { opacity: 0; } /* Disappear at 0.7s */
}

@keyframes holdFadeOut {
    0% { opacity: 1; } /* Appear at 0.7s */
    57.14% { opacity: 1; } /* Hold for 0.4s */
    100% { opacity: 0; } /* Fade out over 0.3s */
}