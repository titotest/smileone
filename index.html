<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Remorph Design</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@900&display=swap">
    <style>
        /* === Global Styles === */
        /* Define CSS variables for font sizes, transitions, and viewport */
        :root {
            --title-font-size: 5vmin; /* Title font size scales with shortest viewport axis */
            --menu-font-size: 4vmin; /* Menu item font size scales with shortest viewport axis */
            --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8); /* Reduced font size when tapped */
            --transition-duration: 0.5s; /* Duration for menu slide and title positioning animations */
            --safe-area-top: env(safe-area-inset-top, 0); /* Fallback to 0 if not supported */
            --viewport-height: 100vh; /* Fallback for older browsers */
        }

        /* Use dynamic viewport height if supported */
        @supports (height: 100dvh) {
            :root {
                --viewport-height: 100dvh; /* Exclude browser UI for better centering */
            }
        }

        /* In portrait mode, scale font sizes with viewport height for better proportionality */
        @media (orientation: portrait) {
            :root {
                --title-font-size: 5vmax; /* Scales with viewport height (longer axis) */
                --menu-font-size: 4vmax;
                --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8);
            }
        }

        /* Reset default margins and ensure full viewport height */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: var(--viewport-height); /* Dynamic viewport height */
            min-height: var(--viewport-height); /* Ensure compatibility */
            font-family: 'Nunito', Arial, sans-serif; /* Font stack with fallback */
            background: black; /* Black background */
            overflow: hidden; /* Prevent scrolling */
            overscroll-behavior: none; /* Disable pull-to-refresh on mobile */
        }

        /* === Container === */
        /* Center container for title and menu */
        .container {
            height: var(--viewport-height); /* Match dynamic viewport height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* === Title === */
        /* Title styling and positioning */
        .title {
            font-size: var(--title-font-size);
            color: white;
            font-weight: 900;
            text-align: center;
            cursor: pointer;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(0deg) scale(1); /* Initial transform state */
            white-space: nowrap; /* Prevent text wrapping */
            backface-visibility: hidden; /* Optimize transform animations */
            z-index: 2; /* Ensure title is above menu */
            transition: top var(--transition-duration) ease, transform var(--transition-duration) ease; /* Smooth top and transform changes */
            will-change: top, transform; /* Optimize animation performance */
        }

        /* Move title to top when menu is visible, account for safe area */
        .title.at-top {
            top: calc(var(--title-font-size) + var(--safe-area-top)); /* Add safe area inset */
            transform: translateX(-50%) rotate(0deg) scale(1); /* Maintain rotation/scale state */
        }

        /* Ensure title stays visible in landscape mode with small viewport height */
        @media (orientation: landscape) and (max-height: 400px) {
            .title.at-top {
                top: calc(var(--title-font-size) * 0.5 + var(--safe-area-top)); /* Reduce top spacing */
            }
        }

        /* === Menu === */
        /* Menu container, initially hidden below viewport */
        .menu {
            position: absolute;
            top: 100%; /* Start below viewport */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: top var(--transition-duration) ease, transform var(--transition-duration) ease, opacity var(--transition-duration) ease, visibility var(--transition-duration) ease; /* Slide and fade animation */
            width: 100%;
            z-index: 1; /* Below title */
            will-change: top, transform, opacity, visibility; /* Optimize animation performance */
        }

        /* Show menu by sliding up to center */
        .menu.visible {
            top: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
            visibility: visible;
        }

        /* Menu list styling */
        .menu-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            list-style: none;
            padding: 0;
            gap: calc(var(--menu-font-size) * 0.4); /* Gap matches visual text height (tuned for Nunito's cap height); adjust to 0.3 or 0.35 if needed */
            max-height: calc(var(--viewport-height) - var(--title-font-size) * 2 - var(--safe-area-top)); /* Fit below title, account for safe area */
            overflow-y: auto; /* Scroll if too tall */
        }

        /* Individual menu items */
        .menu-item {
            font-size: var(--menu-font-size);
            color: white;
            font-weight: 900;
            text-align: center;
            cursor: pointer;
            text-decoration: none;
            transition: font-size 0.1s ease, transform 0.1s ease, background-color 0.1s ease; /* Smooth tap and hover effects */
            white-space: nowrap; /* Prevent wrapping */
        }

        /* Hover effect for desktop */
        @media (hover: hover) {
            .menu-item:hover {
                background-color: rgba(255, 255, 255, 0.1); /* Subtle hover feedback */
            }
        }

        /* Reduce font size and scale when tapped */
        .menu-item.tapped {
            font-size: var(--menu-font-size-tapped);
            transform: scale(0.95); /* Slight scale down for tap feedback */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="title" class="title">REMORPH DESIGN</h1>
        <nav id="menu" class="menu">
            <ul class="menu-list">
                <li><div class="menu-item">SPECS</div></li>
                <li><div class="menu-item">FEATURES</div></li>
                <li><a href="https://www.youtube.com/@RemorphDesign" target="_blank" class="menu-item">VIDEOS</a></li>
                <li><div class="menu-item">PICTURES</div></li>
                <li><div class="menu-item">YAPPING</div></li>
                <li><div class="menu-item">FILES</div></li>
                <li><div class="menu-item">DISCORD</div></li>
            </ul>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Element references with error handling
            const title = document.getElementById('title');
            const menu = document.getElementById('menu');
            if (!title || !menu) {
                console.error('Required elements not found: title or menu');
                return;
            }

            // State variables
            let isSmiley = false; // Tracks if title is showing ":-)"
            let isMenuVisible = false; // Tracks if menu is visible
            let isAnimating = false; // Prevents animation conflicts
            let currentRotation = 0; // Tracks title rotation angle
            let timeoutId = null; // Stores timeout for smiley revert
            let touchStartY = 0; // Tracks touch start position for swipe
            const swipeThreshold = 50; // Minimum swipe distance to toggle menu

            // Debounce utility for resize events
            const debounce = (func, wait) => {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func(...args), wait);
                };
            };

            // Update layout based on menu visibility
            const updateLayout = () => {
                title.classList.toggle('at-top', isMenuVisible); // Move title to top if menu is visible
                menu.classList.toggle('visible', isMenuVisible); // Show/hide menu
                title.style.cursor = isMenuVisible ? 'default' : 'pointer'; // Disable cursor when menu is visible
                title.style.pointerEvents = isMenuVisible ? 'none' : 'auto'; // Disable interactions when menu is visible
                if (!isSmiley) {
                    currentRotation = 0;
                    title.style.transition = 'top var(--transition-duration) ease, transform var(--transition-duration) ease';
                    title.style.transform = `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`; // Ensure starting transform for smooth transition
                }
            };

            // Reset title to "REMORPH DESIGN" with a quick transition
            const resetTitle = () => {
                isSmiley = false;
                clearTimeout(timeoutId);
                timeoutId = null;
                isAnimating = false;
                currentRotation = 0;
                title.textContent = 'REMORPH DESIGN';
                title.style.width = ''; // Clear fixed width
                title.style.transition = 'transform 0.1s ease'; // Quick reset transition
                title.style.transform = isMenuVisible
                    ? `translateX(-50%) rotate(${currentRotation}deg) scale(1)`
                    : `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`;
                title.offsetHeight; // Force reflow to ensure transition
                title.style.transition = 'top var(--transition-duration) ease, transform var(--transition-duration) ease'; // Restore default transition
            };

            // Toggle menu visibility and reset title on scroll
            const toggleMenu = () => {
                isMenuVisible = !isMenuVisible;
                resetTitle(); // Reset title on any scroll
                updateLayout();
            };

            // Update title rotation and scale for animation
            const updateRotation = (targetRotation, duration, scale) => {
                if (isAnimating) return;
                isAnimating = true;
                // Normalize rotation to avoid large values
                while (currentRotation > targetRotation) {
                    currentRotation -= 360;
                }
                currentRotation = targetRotation;
                title.style.transition = `transform ${duration}s ease`;
                title.style.transform = isMenuVisible
                    ? `translateX(-50%) rotate(${currentRotation}deg) scale(${scale})`
                    : `translate(-50%, -50%) rotate(${currentRotation}deg) scale(${scale})`;
                title.offsetHeight; // Force reflow to ensure transition
            };

            // Handle title click to trigger smiley animation
            const handleTitleClick = () => {
                if (isMenuVisible || isAnimating) return;
                
                if (!isSmiley) {
                    const width = title.offsetWidth + 'px';
                    title.style.width = width; // Fix width to prevent layout shift
                    title.textContent = ':-)';
                    isSmiley = true;
                    updateRotation(90, 0.2, 1.2); // Rotate 90째 clockwise, scale up
                    timeoutId = setTimeout(() => {
                        if (!isMenuVisible) {
                            title.textContent = 'REMORPH DESIGN';
                            title.style.width = '';
                            isSmiley = false;
                            updateRotation(0, 0.2, 1); // Rotate back 90째 counterclockwise
                            timeoutId = null;
                        }
                    }, 1000);
                } else {
                    clearTimeout(timeoutId);
                    timeoutId = null;
                    title.textContent = 'REMORPH DESIGN';
                    title.style.width = '';
                    isSmiley = false;
                    updateRotation(360, 0.4, 1); // Complete 270째 clockwise to 360째
                }
            };

            // Reset rotation after full circle animation
            title.addEventListener('transitionend', (e) => {
                if (e.propertyName === 'transform' && currentRotation === 360) {
                    currentRotation = 0;
                    title.style.transition = 'none';
                    title.style.transform = `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`;
                    setTimeout(() => {
                        title.style.transition = `top var(--transition-duration) ease, transform var(--transition-duration) ease`;
                    }, 0);
                }
                isAnimating = false;
            });

            // Handle wheel scroll to toggle menu
            document.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY < 0 && isMenuVisible) toggleMenu(); // Scroll up: hide menu
                else if (e.deltaY > 0 && !isMenuVisible) toggleMenu(); // Scroll down: show menu
            }, { passive: false });

            // Handle touch swipe to toggle menu
            document.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true }); // Passive for performance, no preventDefault needed

            document.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touchEndY = e.touches[0].clientY;
                const deltaY = touchStartY - touchEndY;
                if (Math.abs(deltaY) > swipeThreshold) {
                    if (deltaY < 0 && isMenuVisible) toggleMenu(); // Swipe up: hide menu
                    else if (deltaY > 0 && !isMenuVisible) toggleMenu(); // Swipe down: show menu
                }
            }, { passive: false }); // Non-passive to allow preventDefault

            // Title click interaction
            title.addEventListener('click', handleTitleClick);

            // Menu item interactions (tap, click)
            document.querySelectorAll('.menu-item').forEach(item => {
                const handlePressStart = () => item.classList.add('tapped');
                const handlePressEnd = () => item.classList.remove('tapped');
                const handleClick = () => {
                    if (!item.href) console.log(`${item.textContent} clicked!`); // Placeholder for future functionality
                };

                item.addEventListener('mousedown', handlePressStart);
                item.addEventListener('mouseup', handlePressEnd);
                item.addEventListener('mouseleave', handlePressEnd);
                item.addEventListener('touchstart', (e) => {
                    if (!item.href) e.preventDefault();
                    handlePressStart();
                }, { passive: false });
                item.addEventListener('touchend', (e) => {
                    if (!item.href) e.preventDefault();
                    handlePressEnd();
                }, { passive: false });
                item.addEventListener('touchcancel', handlePressEnd);
                item.addEventListener('click', handleClick);
            });

            // Handle window resize with debouncing
            window.addEventListener('resize', debounce(updateLayout, 100));
            updateLayout(); // Initial layout setup
        });
    </script>
</body>
</html>