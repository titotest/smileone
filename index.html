<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remorph Design</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Nunito:wght@900&display=swap">
    <style>
        :root {
            --title-font-size: 5vmin;
            --menu-font-size: 4vmin;
            --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8);
            --transition-duration: 0.5s;
        }

        /* Adjust font sizes for portrait orientation (height > width) */
        @media (orientation: portrait) {
            :root {
                --title-font-size: 5vmax; /* Scale with viewport height */
                --menu-font-size: 4vmax;
                --menu-font-size-tapped: calc(var(--menu-font-size) * 0.8);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100vh;
            font-family: 'Nunito', Arial, sans-serif;
            background: black;
            overflow: hidden;
            overscroll-behavior: none;
        }

        .container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .title {
            font-size: var(--title-font-size);
            color: white;
            font-weight: 900;
            text-align: center;
            cursor: pointer;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(0deg) scale(1);
            white-space: nowrap;
            max-width: 90vmin;
            will-change: transform;
            backface-visibility: hidden;
            z-index: 2;
            transition: top var(--transition-duration) ease;
        }

        .title.at-top {
            top: var(--title-font-size);
            transform: translateX(-50%) rotate(0deg) scale(1);
        }

        .menu {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            visibility: hidden;
            transition: top var(--transition-duration) ease, transform var(--transition-duration) ease, opacity var(--transition-duration) ease, visibility var(--transition-duration) ease;
            width: 100%;
            max-width: 90vmin;
            z-index: 1;
        }

        .menu.visible {
            top: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
            visibility: visible;
        }

        .menu-list {
            display: flex;
            flex-direction: column;
            align-items: center;
            list-style: none;
            padding: 0;
            gap: calc(var(--menu-font-size) * 0.4); /* Adjust with --menu-font-size; try 0.3 (smaller) or 0.35 if needed */
            max-height: calc(100vh - var(--title-font-size) * 2);
            overflow-y: auto;
        }

        .menu-item {
            font-size: var(--menu-font-size);
            color: white;
            font-weight: 900;
            text-align: center;
            cursor: pointer;
            text-decoration: none;
            transition: font-size 0.1s ease, background-color 0.1s ease;
            white-space: nowrap;
            width: max-content;
        }

        .menu-item.tapped {
            font-size: var(--menu-font-size-tapped);
        }

        .menu-item:focus {
            background-color: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="title" class="title" role="button" aria-expanded="false" tabindex="0">REMORPH DESIGN</h1>
        <nav id="menu" class="menu" aria-hidden="true">
            <ul class="menu-list">
                <li><div class="menu-item" tabindex="0">SPECS</div></li>
                <li><div class="menu-item" tabindex="0">FEATURES</div></li>
                <li><a href="https://www.youtube.com/@RemorphDesign" target="_blank" class="menu-item">VIDEOS</a></li>
                <li><div class="menu-item" tabindex="0">PICTURES</div></li>
                <li><div class="menu-item" tabindex="0">YAPPING</div></li>
                <li><div class="menu-item" tabindex="0">FILES</div></li>
                <li><div class="menu-item" tabindex="0">DISCORD</div></li>
            </ul>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const title = document.getElementById('title');
            const menu = document.getElementById('menu');
            let isSmiley = false;
            let isMenuVisible = false;
            let isAnimating = false;
            let currentRotation = 0;
            let timeoutId = null;
            let touchStartY = 0;
            const swipeThreshold = 50;

            // Debounce utility
            const debounce = (func, wait) => {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(null, args), wait);
                };
            };

            // Update layout
            const updateLayout = () => {
                title.classList.toggle('at-top', isMenuVisible);
                menu.classList.toggle('visible', isMenuVisible);
                title.setAttribute('aria-expanded', isMenuVisible);
                menu.setAttribute('aria-hidden', !isMenuVisible);
                title.style.cursor = isMenuVisible ? 'default' : 'pointer';
                title.style.pointerEvents = isMenuVisible ? 'none' : 'auto';
                if (!isSmiley) {
                    currentRotation = 0;
                    title.style.transition = `top var(--transition-duration) ease`;
                    title.style.transform = `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`;
                }
            };

            // Reset title state
            const resetTitle = () => {
                isSmiley = false;
                clearTimeout(timeoutId);
                timeoutId = null;
                isAnimating = false;
                currentRotation = 0;
                title.textContent = 'REMORPH DESIGN';
                title.style.width = '';
                title.style.transition = `transform 0.1s ease`;
                title.style.transform = isMenuVisible
                    ? `translateX(-50%) rotate(${currentRotation}deg) scale(1)`
                    : `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`;
                title.offsetHeight; // Force reflow
                title.style.transition = `top var(--transition-duration) ease`;
            };

            // Toggle menu
            const toggleMenu = () => {
                isMenuVisible = !isMenuVisible;
                resetTitle(); // Reset title on any scroll
                updateLayout();
            };

            // Update rotation
            const updateRotation = (targetRotation, duration, scale) => {
                if (isAnimating) return;
                isAnimating = true;
                while (currentRotation > targetRotation) {
                    currentRotation -= 360;
                }
                currentRotation = targetRotation;
                title.style.transition = `transform ${duration}s ease`;
                title.style.transform = isMenuVisible
                    ? `translateX(-50%) rotate(${currentRotation}deg) scale(${scale})`
                    : `translate(-50%, -50%) rotate(${currentRotation}deg) scale(${scale})`;
                title.offsetHeight; // Force reflow
            };

            // Handle title click
            const handleTitleClick = () => {
                if (isMenuVisible || isAnimating) return;
                
                if (!isSmiley) {
                    const width = title.offsetWidth + 'px';
                    title.style.width = width;
                    title.textContent = ':-)';
                    isSmiley = true;
                    updateRotation(90, 0.2, 1.2);
                    timeoutId = setTimeout(() => {
                        if (!isMenuVisible) {
                            title.textContent = 'REMORPH DESIGN';
                            title.style.width = '';
                            isSmiley = false;
                            updateRotation(0, 0.2, 1);
                            timeoutId = null;
                        }
                    }, 1000);
                } else {
                    clearTimeout(timeoutId);
                    timeoutId = null;
                    title.textContent = 'REMORPH DESIGN';
                    title.style.width = '';
                    isSmiley = false;
                    updateRotation(360, 0.4, 1);
                }
            };

            // Reset rotation after animation
            title.addEventListener('transitionend', (e) => {
                if (e.propertyName === 'transform' && currentRotation === 360) {
                    currentRotation = 0;
                    title.style.transition = 'none';
                    title.style.transform = `translate(-50%, -50%) rotate(${currentRotation}deg) scale(1)`;
                    setTimeout(() => {
                        title.style.transition = `top var(--transition-duration) ease`;
                    }, 0);
                }
                isAnimating = false;
            });

            // Wheel event
            document.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY < 0 && isMenuVisible) toggleMenu();
                else if (e.deltaY > 0 && !isMenuVisible) toggleMenu();
            }, { passive: false });

            // Touch events
            document.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });

            document.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touchEndY = e.touches[0].clientY;
                const deltaY = touchStartY - touchEndY;
                if (Math.abs(deltaY) > swipeThreshold) {
                    if (deltaY < 0 && isMenuVisible) toggleMenu();
                    else if (deltaY > 0 && !isMenuVisible) toggleMenu();
                }
            }, { passive: false });

            // Title interactions
            title.addEventListener('click', handleTitleClick);
            title.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    handleTitleClick();
                }
            });

            // Menu item interactions
            document.querySelectorAll('.menu-item').forEach(item => {
                const handlePressStart = () => item.classList.add('tapped');
                const handlePressEnd = () => item.classList.remove('tapped');
                const handleClick = () => {
                    if (!item.href) console.log(`${item.textContent} clicked!`);
                };

                item.addEventListener('mousedown', handlePressStart);
                item.addEventListener('mouseup', handlePressEnd);
                item.addEventListener('mouseleave', handlePressEnd);
                item.addEventListener('touchstart', (e) => {
                    if (!item.href) e.preventDefault();
                    handlePressStart();
                }, { passive: false });
                item.addEventListener('touchend', (e) => {
                    if (!item.href) e.preventDefault();
                    handlePressEnd();
                }, { passive: false });
                item.addEventListener('touchcancel', handlePressEnd);
                item.addEventListener('click', handleClick);
                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        handleClick();
                    }
                });
            });

            // Debounced resize
            window.addEventListener('resize', debounce(updateLayout, 100));
            updateLayout();
        });
    </script>
</body>
</html>